FROM node:8.1.4

# Install Caddy and copy the configuration file over.
RUN curl https://getcaddy.com | bash

# Create vueform directory.
RUN mkdir /srv/vueform
WORKDIR /srv/vueform

# Install dependencies.
COPY package.json package.json
COPY package-lock.json package-lock.json
RUN npm install

# Copy over source files and build distribution.
COPY . .
RUN npm run build

EXPOSE 80

CMD [ "caddy", "-conf=/srv/vueform/Caddyfile" ]
